<!doctype html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>Moblin Scoreboard Control</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      :root {
        --bg-color: #09090b;
        --card-bg: #18181b;
        --btn-bg: #27272a;
        --btn-border: #3f3f46;
        --text-main: #e4e4e7;
        --text-dim: #a1a1aa;
        --accent: #eab308;
      }
      body {
        position: fixed;
        width: 100%;
        height: 100%;
        overflow: hidden;
        background-color: var(--bg-color);
        color: var(--text-main);
        font-family:
          system-ui,
          -apple-system,
          sans-serif;
        font-size: 14px;
        font-weight: 600;
        user-select: none;
        -webkit-user-select: none;
        touch-action: manipulation;
      }
      input[type="text"],
      select {
        background: transparent;
        color: inherit;
        border: none;
        text-align: center;
        font-size: inherit;
        width: 100%;
        outline: none;
      }
      select {
        height: 100%;
        appearance: none;
      }
      input[type="color"] {
        appearance: none;
        border: none;
        width: 100%;
        height: 100%;
        padding: 0;
        cursor: pointer;
      }
      input[type="color"]::-webkit-color-swatch {
        border: none;
      }
      .card {
        background-color: var(--card-bg);
        border: 1px solid var(--btn-border);
        border-radius: 8px;
        padding: 6px;
      }
      .btn {
        display: flex;
        align-items: center;
        justify-content: center;
        background-color: var(--btn-bg);
        border: 1px solid var(--btn-border);
        border-radius: 6px;
        cursor: pointer;
        text-transform: uppercase;
        transition:
          filter 0.1s,
          transform 0.1s;
        width: 100%;
      }
      .btn:active {
        filter: brightness(1.3);
        transform: scale(0.98);
      }
      .btn-score {
        height: 75px;
        font-size: 20px;
        background-color: #ffffff;
        color: #000000;
      }
      .btn-ctrl {
        height: 50px;
        font-size: 14px;
      }
      .btn-top {
        height: 40px;
        background-color: #000;
      }
      .btn-active {
        background-color: var(--accent);
        color: black;
        border-color: var(--accent);
      }
      .btn-accent {
        background-color: var(--accent);
        color: black;
        border: none;
      }
      .disp-box {
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 4px;
        font-size: 24px;
        height: 40px;
      }
      .disp-sm {
        height: 50px;
        border: 1px solid var(--btn-border);
        border-radius: 6px;
        overflow: hidden;
        display: flex;
        align-items: center;
        justify-content: center;
        width: 100%;
      }

      /* Configuration Styles */
      details summary {
        cursor: pointer;
        color: var(--text-dim);
        font-size: 11px;
        padding: 6px;
        border: 1px solid var(--btn-border);
        border-radius: 4px;
        background: var(--card-bg);
        margin-bottom: 2px;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
      .active-set {
        color: var(--accent);
        border-color: var(--accent);
      }
      .m-shadow {
        box-shadow: inset 0 0 0 100px rgba(0, 0, 0, 0.3);
      }
      .text-label {
        color: var(--text-dim);
        font-size: 12px;
        text-transform: uppercase;
      }
      .conf-label {
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--text-dim);
        font-size: 10px;
        background: #000;
        border-radius: 4px;
      }
      .conf-input {
        background: #000;
        border-radius: 4px;
        height: 36px;
      }
      .status-text {
        font-weight: 800;
        text-transform: uppercase;
      }
    </style>
  </head>
  <body class="p-2">
    <div class="h-full flex flex-col max-w-lg mx-auto space-y-2">
      <!-- Teams -->
      <div id="ctrl" class="opacity-30 pointer-events-none flex gap-2">
        <div id="t1a" class="flex-1 space-y-2"></div>
        <div id="t2a" class="flex-1 space-y-2"></div>
      </div>

      <!-- Persistent Controls (Clock & Info) -->
      <div class="card grid grid-cols-4 gap-2 items-center shadow-xl">
        <button
          onclick="window.sendAction('toggle-clock')"
          class="btn btn-top bg-indigo-600 text-white border-none"
        >
          CLOCK
        </button>
        <input
          type="text"
          id="gti"
          onblur="window.upd()"
          placeholder="00:00"
          class="btn-top font-mono text-lg text-indigo-400 bg-black rounded"
        />
        <select
          id="dur-sel"
          onchange="window.setDuration(this.value)"
          class="btn-top bg-black rounded"
        ></select>
        <select
          id="gtd"
          onchange="
            window.state.global.timerDirection = this.value;
            window.upd();
          "
          class="btn-top bg-black rounded"
        >
          <option value="up">UP</option>
          <option value="down">DOWN</option>
        </select>
      </div>

      <details>
        <summary>HISTORICAL SCORES</summary>
        <div class="grid grid-cols-5 gap-1 mt-1" id="history-grid"></div>
      </details>

      <!-- Actions -->
      <div class="grid grid-cols-2 gap-2">
        <button onclick="window.resetSet()" id="btn-reset-set" class="btn btn-ctrl border-zinc-600">
          Next Set/Period
        </button>
        <button onclick="window.resetMatch()" class="btn btn-ctrl border-red-900 text-red-400">
          New Match
        </button>
      </div>

      <!-- Config Menu -->
      <details open>
        <summary>
          <span>SCOREBOARD CONFIGURATION</span>
          <span id="stat" class="status-text text-red-500">Disconnected</span>
        </summary>
        <div class="card grid grid-cols-4 gap-2 mt-1">
          <!-- Selectors Moved Here -->
          <select
            id="sport-selector"
            onchange="window.switchSport(this.value)"
            class="col-span-2 btn h-9 text-[10px] bg-black"
          >
            <option value="">LOADING...</option>
          </select>
          <select
            id="layout-selector"
            onchange="window.switchLayout(this.value)"
            class="col-span-2 btn h-9 text-[10px] bg-black"
          >
            <option value="stacked">Stacked</option>
            <option value="stackedInline">Stacked Inline</option>
            <option value="sideBySide">Side by Side</option>
            <option value="stackHistory">Stack History</option>
          </select>

          <input
            type="text"
            id="gt"
            onblur="window.upd()"
            placeholder="TITLE"
            class="col-span-2 conf-input px-2"
          />
          <div id="lbl-period" class="conf-label">PER</div>
          <input type="text" id="gp" onblur="window.upd()" class="conf-input" />

          <button id="btn-show-title" onclick="window.tog('showTitle')" class="btn h-9 text-[10px]">
            Title
          </button>
          <button id="btn-title-top" onclick="window.tog('titleTop')" class="btn h-9 text-[10px]">
            Top/Bot
          </button>
          <button id="btn-show-stats" onclick="window.tog('showStats')" class="btn h-9 text-[10px]">
            Info Box
          </button>
          <button
            id="btn-show-2nd"
            onclick="window.tog('showSecondaryRow')"
            class="btn h-9 text-[10px]"
          >
            2nd Row
          </button>

          <input
            type="text"
            id="gi"
            onblur="window.upd()"
            placeholder="INFO BOX"
            class="col-span-4 conf-input px-2"
          />
        </div>
      </details>

      <!-- Footer -->
      <div
        class="btn-top border border-zinc-800 rounded font-mono text-xs flex items-center justify-center gap-4 text-zinc-500"
      >
        <div>BIT: <span id="sb" class="text-white">--</span></div>
        <div>BAT: <span id="sp" class="text-white">--</span></div>
        <div id="si" class="text-amber-500">Syncing...</div>
      </div>
    </div>

    <script src="js/remote.mjs" type="module"></script>
  </body>
</html>
